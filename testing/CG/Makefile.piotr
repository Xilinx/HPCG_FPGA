

include ../../setup/Make.$(arch)

HPCG_ROOT = ../..

HPCG_DEPS = $(HPCG_ROOT)/src/CG.o $(HPCG_ROOT)/src/ComputeResidual.o $(HPCG_ROOT)/src/ExchangeHalo.o $(HPCG_ROOT)/src/GenerateGeometry.o $(HPCG_ROOT)/src/GenerateProblem.o $(HPCG_ROOT)/src/OptimizeMatrix.o $(HPCG_ROOT)/src/OptimizeProblem.o $(HPCG_ROOT)/src/SetupHalo.o $(HPCG_ROOT)/src/WriteProblem.o $(HPCG_ROOT)/src/YAML_Doc.o $(HPCG_ROOT)/src/YAML_Element.o $(HPCG_ROOT)/src/dot.o $(HPCG_ROOT)/src/mytimer.o $(HPCG_ROOT)/src/spmv.o $(HPCG_ROOT)/src/spmvref.o $(HPCG_ROOT)/src/symgs.o $(HPCG_ROOT)/src/symgsref.o $(HPCG_ROOT)/src/waxpby.o

CXXFLAGS += -I$(HPCG_ROOT)/src

#FIXME: should main.cpp be changed to xhpcg.cpp?
xcgtest: main.o ReportCGResults.o $(HPCG_DEPS)
	$(LINKER) $(LINKFLAGS) $? -o $@ $(HPCG_LIBS)

clean:
	rm -f main.o ReportCGResults.o xcgtest

.PHONY: clean


#! /bin/sh

src_path=`echo $0 | sed -e s:/configure$::`
bld_path=`pwd`

#FIXME: need to check whether src and bld are the same

mkfile=${bld_path}/Makefile

if test -d $mkfile ; then
  rm -rf $mkfile
fi

sed -e "s:HPCG_ROOT_PATH:${bld_path}:g" ${src_path}/Makefile.ext | sed -e "s:HPCG_SRC_PATH:${src_path}:g" > $mkfile

src_obj_path=src
testing_obj_path=testing
testing_benchmark_obj_path=testing/Benchmark
testing_cg_obj_path=testing/CG
testing_sparsematrix_obj_path=testing/SparseMatrix

for path in $src_obj_path $testing_obj_path $testing_benchmark_obj_path $testing_cg_obj_path $testing_sparsematrix_obj_path
do
  if test ! -d $path ; then
    mkdir $path
  fi
done
